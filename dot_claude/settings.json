{
  "env": {
    "MAX_THINKING_TOKENS": "32000",
    "CLAUDE_BASH_MAINTAIN_PROJECT_WORKING_DIR": "1"
  },
  "includeCoAuthoredBy": false,
  "permissions": {
    "allow": [
      "Skill(*)",
      "Bash(npm run textlint:fix:*)",
      "Bash(npm run lint:fix:*)",
      "Bash(npx biome check:*)",
      "Bash(npx tsc --noEmit)",
      "Bash(npx tsc:*)",
      "Bash(chezmoi source-path:*)",
      "Bash(chezmoi managed:*)",
      "Bash(brew services:*)",
      "Bash(npm run format:*)",
      "Bash(cat:*)",
      "Bash(curl:*)",
      "Bash(find:*)",
      "Bash(lsof:*)",
      "Bash(node:*)",
      "Bash(grep:*)",
      "Bash(tree:*)",
      "Bash(jq:*)",
      "Bash(npm info:*)",
      "Bash(npm init:*)",
      "Bash(npm install:*)",
      "Bash(npm run dev:*)",
      "Bash(npm run lint)",
      "Bash(npm run typecheck:*)",
      "Bash(npm test)",
      "Bash(npm uninstall:*)",
      "Bash(npx husky init:*)",
      "Bash(npx textlint:*)",
      "Bash(npx wrangler:*)",
      "Bash(tail:*)",
      "WebFetch(domain:api.github.com)",
      "WebFetch(domain:apify.com)",
      "WebFetch(domain:code.claude.com)",
      "WebFetch(domain:empathyfirstmedia.com)",
      "WebFetch(domain:github.com)",
      "WebFetch(domain:openai.com)",
      "WebFetch(domain:pure.md)",
      "WebFetch(domain:qiita.com)",
      "WebFetch(domain:railway.com)",
      "WebFetch(domain:rapidapi.com)",
      "WebFetch(domain:raw.githubusercontent.com)",
      "WebFetch(domain:supadata.ai)",
      "WebFetch(domain:typicode.github.io)",
      "WebFetch(domain:vercel.com)",
      "WebFetch(domain:www.anthropic.com)",
      "WebFetch(domain:www.dumplingai.com)",
      "WebFetch(domain:www.npmjs.com)",
      "WebFetch(domain:x.ai)",
      "WebFetch(domain:zenn.dev)",
      "WebSearch"
    ],
    "deny": [],
    "ask": [
      "Bash(rm:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "Bash(git rebase:*)"
    ]
  },
  "model": "opus",
  "statusLine": {
    "type": "command",
    "command": "input=$(cat); cwd=$(echo \"$input\" | jq -r '.workspace.current_dir // .cwd'); dir_display=\"${cwd/#$HOME/\\~}\"; git_info=\"\"; if git -C \"$cwd\" rev-parse --git-dir >/dev/null 2>&1; then branch=$(git -C \"$cwd\" branch --show-current 2>/dev/null || echo \"detached\"); status_output=$(git -C \"$cwd\" --no-optional-locks status --porcelain 2>/dev/null); modified=$(echo \"$status_output\" | grep -c \"^ M\" || true); added=$(echo \"$status_output\" | grep -c \"^A\" || true); deleted=$(echo \"$status_output\" | grep -c \"^D\" || true); untracked=$(echo \"$status_output\" | grep -c \"^??\" || true); ahead_behind=$(git -C \"$cwd\" --no-optional-locks rev-list --left-right --count HEAD...@{upstream} 2>/dev/null || echo \"0 0\"); ahead=$(echo \"$ahead_behind\" | awk '{print $1}'); behind=$(echo \"$ahead_behind\" | awk '{print $2}'); git_status=\"\"; [[ $modified -gt 0 ]] && git_status=\"${git_status}~${modified}\"; [[ $added -gt 0 ]] && git_status=\"${git_status}+${added}\"; [[ $deleted -gt 0 ]] && git_status=\"${git_status}x${deleted}\"; [[ $untracked -gt 0 ]] && git_status=\"${git_status}?${untracked}\"; [[ $ahead -gt 0 ]] && git_status=\"${git_status}>${ahead}\"; [[ $behind -gt 0 ]] && git_status=\"${git_status}<${behind}\"; if [[ -n \"$git_status\" ]]; then git_info=$(printf \" \\033[32mgit\\033[0m \\033[33m%s\\033[0m \\033[31m[%s]\\033[0m\" \"$branch\" \"$git_status\"); else git_info=$(printf \" \\033[32mgit\\033[0m \\033[33m%s\\033[0m\" \"$branch\"); fi; fi; printf \"\\033[36m%s\\033[0m%s\" \"$dir_display\" \"$git_info\""
  },
  "enabledPlugins": {
    "document-skills@anthropic-agent-skills": true,
    "code-review@claude-code-plugins": true,
    "commit-commands@claude-code-plugins": true,
    "feature-dev@claude-code-plugins": true,
    "frontend-design@claude-code-plugins": true,
    "example-skills@anthropic-agent-skills": true,
    "cc-helper@cc-plugins": false,
    "cc-skill-agent-guide@cc-plugins": false,
    "cc-builder@cc-plugins": true,
    "cc-optimizer@cc-plugins": true
  },
  "outputStyle": "Explanatory",
  "alwaysThinkingEnabled": true,
  "hooks": {
    "Notification": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "cat | jq -r '(.title // \"Claude Code\"), (.message // \"通知が発生しました\")' | { read title; read message; ~/.claude/hooks/notify-to-windows.sh -t \"$title\" -m \"$message\" -T info; }"
          }
        ]
      }
    ],
    "Stop": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "~/.claude/hooks/notify-to-windows.sh -t \"Claude Code\" -m \"作業が完了しました。\" -T success"
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "~/.claude/hooks/pre-compact.sh"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "WebSearch",
        "hooks": [
          {
            "type": "command",
            "command": "echo '⚠️ Web 検索時は必ず「2025」を含めること' >&2"
          }
        ]
      },
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "jq -r '.tool_input.file_path' | grep -qE '(\\.env|\\.git/|package-lock\\.json|credentials|secrets)' && { echo '⚠️ 保護されたファイルへの編集はブロックされました' >&2; exit 2; } || exit 0"
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "matcher": "compact",
        "hooks": [
          {
            "type": "command",
            "command": "~/.claude/hooks/restore-context.sh"
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "jq -r '.prompt' | grep -qiE '(sk-[a-zA-Z0-9]{20,}|xoxb-|ghp_|AKIA[A-Z0-9]{16})' && { echo '{\"decision\":\"block\",\"reason\":\"⚠️ API キーやトークンが含まれています。1Password などで管理してください。\"}'; exit 0; } || exit 0"
          }
        ]
      }
    ]
  }
}
