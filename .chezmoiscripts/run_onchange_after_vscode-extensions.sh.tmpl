#!/bin/bash

# hash {{ .extensions.vscode | toJson | sha256sum }}

set -euo pipefail

{{ if lookPath "code" -}}
echo "==> Installing VSCode extensions..."

INSTALLED_EXTENSIONS=$(code --list-extensions)

{{ range .extensions.vscode.ext-ids -}}
if ! echo "$INSTALLED_EXTENSIONS" | grep -q "^{{ . }}$"; then
  echo "Installing extension: {{ . }}"
  code --install-extension "{{ . }}" --force
else
  echo "Extension already installed: ~{{ . }}"
fi
{{ end -}}

echo "VSCode extensions installation completed."
{{ else -}}
echo "VSCode is not installed. Skipping extension installation."
{{ end -}}
